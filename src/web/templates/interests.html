{% extends "base.html" %}
{% block title %}Interests - Minion{% endblock %}
{% block content %}
<div class="page-header">
    <h2>Interests</h2>
    <button onclick="document.getElementById('add-interest-dialog').showModal()">+ Add Interest</button>
</div>

<div class="pills">
    <a href="/app/interests" class="pill{% if active_filter is none %} active{% endif %}">All</a>
    <a href="/app/interests?active=true" class="pill{% if active_filter == true %} active{% endif %}">Active</a>
    <a href="/app/interests?active=false" class="pill{% if active_filter == false %} active{% endif %}">Inactive</a>
</div>

<div id="interests-list">
{% for i in interests %}
{% include "partials/interest_row.html" %}
{% else %}
<p class="empty-state">No interests tracked yet.</p>
{% endfor %}
</div>

<dialog id="add-interest-dialog">
    <article>
        <header>
            <button aria-label="Close" rel="prev" onclick="this.closest('dialog').close()"></button>
            <h3>Add Interest</h3>
        </header>
        <form hx-post="/app/interests" hx-target="#interests-list" hx-swap="afterbegin" hx-on::after-request="this.closest('dialog').close(); this.reset();">
            <label for="topic">Topic</label>
            <input type="text" name="topic" id="topic" required>
            <label for="description">Description</label>
            <textarea name="description" id="description" rows="2"></textarea>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div>
                    <label for="priority">Priority (1-3)</label>
                    <input type="number" name="priority" id="priority" min="1" max="3" value="1">
                </div>
                <div>
                    <label for="check_interval_hours">Check every (hours)</label>
                    <input type="number" name="check_interval_hours" id="check_interval_hours" min="1" value="24">
                </div>
            </div>
            <button type="submit">Save</button>
        </form>
    </article>
</dialog>
{% endblock %}
