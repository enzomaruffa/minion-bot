{% extends "base.html" %}
{% block title %}Calendar - Minion{% endblock %}
{% block content %}
<h2>Calendar</h2>

<div class="pills">
    <a href="/app/calendar?days=1" class="pill{% if days == 1 %} active{% endif %}">Today</a>
    <a href="/app/calendar?days=3" class="pill{% if days == 3 %} active{% endif %}">3 Days</a>
    <a href="/app/calendar?days=7" class="pill{% if days == 7 %} active{% endif %}">Week</a>
    <a href="/app/calendar?days=14" class="pill{% if days == 14 %} active{% endif %}">2 Weeks</a>
</div>

{% if events %}
{% set ns = namespace(current_date='') %}
{% for ev in events %}
    {% set ev_date = ev.start_time.strftime('%A, %b %d') %}
    {% if ev_date != ns.current_date %}
        {% set ns.current_date = ev_date %}
        <h5 style="margin-top: 1rem; margin-bottom: 0.5rem;">{{ ev_date }}</h5>
    {% endif %}
    <div class="task-row">
        <span class="task-id">{{ ev.start_time.strftime('%H:%M') }}</span>
        <span class="task-title">{{ ev.title }}</span>
        <span class="muted">{{ ev.end_time.strftime('%H:%M') }}</span>
    </div>
{% endfor %}
{% else %}
<p class="empty-state">No events in this period.</p>
{% endif %}
{% endblock %}
